Project platDB {
  database_type : "MySQL"
}

Table locations {
  location_id     int         [pk, increment]
  location_name   varchar(100) [not null]
  address         varchar(255)
  city            varchar(50)
  region          varchar(50)
  latitude        decimal(10,8)
  longitude       decimal(11,8)
  created_at      datetime    [default: `CURRENT_TIMESTAMP`]
}

Table months {
  month_id        int         [pk, increment]
  month_number    int         [unique, not null] // رقم الشهر (1-12)
  month_name_ar   varchar(20) [not null] // اسم الشهر بالعربية
  month_name_en   varchar(20) [not null] // اسم الشهر بالإنجليزية
}

Table branch_targets {
  target_id                         int         [pk, increment]
  branch_id                         int         [ref: > branches.branch_id] // الفرع
  month_id                          int         [ref: > months.month_id] // الشهر
  target_amount                     decimal(10,2) [default: 0.00] // مبلغ التارجت
  
  // Target settings (إعدادات التارجت)
  commission_calculation_percentage  int         [default: 100] // حتى يتم احتساب عمولة الموظف يجب أكمال التارجت المطلوب بنسبة %
  target_achievement_percentage      decimal(5,2) [default: 1.0] // من تم تحقيق التارجت المطلوب %
  calculate_commission_full_amount   boolean     [default: false] // احتساب العمولة على كامل المبلغ
  minimum_rent_additional            int         [default: 85] // سعر الإيجار الأدنى + X ويجب بحسب بنع %
  minimum_rent_base                  int         [default: 30] // القيمة الأساسية للإيجار الأدنى
  
  created_at                        datetime    [default: `CURRENT_TIMESTAMP`]
  updated_at                        datetime    [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    (branch_id, month_id) [unique] // منع تكرار نفس الشهر لنفس الفرع
  }
}

Table services {
  service_id      int         [pk, increment]
  service_name_ar varchar(100) [not null] // اسم الخدمة بالعربية
  service_name_en varchar(100) // اسم الخدمة بالإنجليزية
  description     text        // وصف الخدمة
  is_active       boolean     [default: true] // فعال/غير فعال
  created_at      datetime    [default: `CURRENT_TIMESTAMP`]
}

Table branch_services {
  branch_service_id int [pk, increment]
  branch_id         int [ref: > branches.branch_id] // الفرع
  service_id        int [ref: > services.service_id] // الخدمة
  is_active         boolean [default: true] // الخدمة فعالة في هذا الفرع
  start_date        date // تاريخ بداية الخدمة
  end_date          date // تاريخ انتهاء الخدمة (اختياري)
  notes             text // ملاحظات خاصة بالخدمة في هذا الفرع
  created_at        datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    (branch_id, service_id) [unique] // منع تكرار نفس الخدمة لنفس الفرع
  }
}



Table branches {
  branch_id                         int         [pk, increment]
  branch_code                       varchar(10) [unique, not null] // كود الفرع
  branch_name_ar                    varchar(100) [not null] // الاسم العربي
  branch_name_en                    varchar(100) // الاسم الإنجليزي
  location_id                       int         [ref: > locations.location_id] // الموقع من جدول منفصل
                  
  // Contact Information
  phone_number                      varchar(20) // هاتف الفرع
  license_number                    varchar(50) // رقم ترخيص الفرع
  branch_license_number             varchar(50) // رقم ترخيص الفرع
 
 //responsible manager information
  responsible_manager_name          varchar(100) // المدير المسؤول
  responsible_manager_mobile        varchar(20) // جوال المدير المسؤول
  //branch information
  branch_email                      varchar(100) // البريد الإلكتروني (تبع الفرع)
  branch_address                    varchar(100)
  

  // Additional branch settings from new image
  max_count                         int         [default: 1000] // العدد الأقصى (1000 في الصورة)
  security_camera_link              varchar(255) // رابط كاميرا المراقبة
  fingerprint_system_link           varchar(255) // رابط نظام البصمة
  rental_sequence_start             int         [default: 1] // بداية تسلسل المؤجر
  documents_sequence_start          int         [default: 1] // بداية تسلسل السندات
  
  // Branch limitations and features
  no_document_updates               boolean     [default: false] // لا يوجد طقورات للسندات لعدم امكانية المقر بتحديث الاسعار
  no_check_visa_payment             boolean     [default: false] // هذا الفرع لا يدعم القبض بالشيكة او فيزا
  
  // Operating hours
  opening_time                      time        // بداية عمل البرنامج يوميا عند الساعة
  closing_time                      time        // إغلاق البرنامج يوميا عند الساعة
  

  created_at                        datetime [default: `CURRENT_TIMESTAMP`]
  updated_at                        datetime [default: `CURRENT_TIMESTAMP`]
}
